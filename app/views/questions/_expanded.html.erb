<h3><%= question.title %></h3>
<hr/>
<div class="post-container <%= "deleted-content" if question.is_deleted %>">
  <div class="vote-box">
    <p>
      <% if my_vote(question) && my_vote(question).vote_type == 1 %>
        <img class="vote-button" data-vote="1/<%= question.id %>/q/<%= my_vote(question).id %>"
             id="question-<%= question.id %>-up" src="/assets/up-fill.png" height="48" />
      <% else %>
        <img class="vote-button" data-vote="1/<%= question.id %>/q/-1"
           id="question-<%= question.id %>-up" src="/assets/up-clear.png" height="48" />
      <% end %>
    </p>
    <p class="post-score large-text center"><%= question.score %></p>
    <p>
      <% if my_vote(question) && my_vote(question).vote_type == -1 %>
        <img class="vote-button" data-vote="-1/<%= question.id %>/q/<%= my_vote(question).id %>"
             id="question-<%= question.id %>-down" src="/assets/down-fill.png" height="48" />
      <% else %>
        <img class="vote-button" data-vote="-1/<%= question.id %>/q/-1"
           id="question-<%= question.id %>-down" src="/assets/down-clear.png" height="48" />
      <% end %>
    </p>
  </div>
  <div class="body-box">
    <%= QuestionsController.renderer.render(question.body).gsub("\n", "<br/>") %>
  </div>
  <span class="clearfix"></span>
  <hr/>
  <div class="post-info">
    <div class="post-tags">
      <% question.tags.each do |tag| %>
        <a href="/questions/tagged/<%= tag %>"><span class="tag"><%= tag %></span></a>
      <% end %>
    </div>
    <div class="post-author">
      Posted <span title="<%= question.created_at %>" data-livestamp="<%= question.created_at %>">at <%= question.created_at %></span>
      by <a href="/users/<%= question.user.id %>"><%= question.user.username %></a> (<%= question.user.reputation %>)
    </div>
    <% if with_actions %>
      <div class="clearfix padded"></div>
      <div class="padded">
        <a href="/questions/<%= question.id %>/edit" class="btn btn-info">Edit</a>
        <% if !question.is_deleted %>
          <%= link_to "Delete", url_for(:controller => :questions, :action => :destroy, :id => question.id),
            :method => :delete, data: { :confirm => 'Are you sure you want to delete this question?' }, class: "btn btn-danger" %>
        <% else %>
          <%= link_to "Undelete", url_for(:controller => :questions, :action => :undelete, :id => question.id),
            :method => :patch, data: { :confirm => 'Undelete this question, making it visible to regular users?' }, class: "btn btn-danger" %>
        <% end %>
        <a href="#" class="flag-link" data-post-type="Question" data-post-id="<%= question.id %>">flag</a>
      </div>
      <hr/>
      <div class="comments-container">
        <% question.comments.each do |comment| %>
          <%= render 'comments/comment', :comment => comment %>
        <% end %>
        <%= form_for Comment.new, url: { :controller => :comments, :action => :create } do |f| %>
          <%= f.hidden_field :post_type, :value => 'Question' %>
          <%= f.hidden_field :post_id, :value => question.id %>
          <div class="field">
            <%= f.text_area :content, { class: "form-control", rows: 3 } %>
          </div>
          <div class="field">
            <%= f.submit "Add Comment", class: "btn btn-default" %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
